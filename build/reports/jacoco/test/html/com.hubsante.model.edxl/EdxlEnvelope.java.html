<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EdxlEnvelope.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">models-2</a> &gt; <a href="index.source.html" class="el_package">com.hubsante.model.edxl</a> &gt; <span class="el_source">EdxlEnvelope.java</span></div><h1>EdxlEnvelope.java</h1><pre class="source lang-java linenums">/**
 * Copyright Â© 2023 Agence du Numerique en Sante (ANS)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.hubsante.model.edxl;

import com.fasterxml.jackson.annotation.*;
import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;
import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;

import java.time.OffsetDateTime;
import java.util.Objects;

/*
* We need JsonAutoDetect to override Jackson default behavior :
* We disable getter usage to force Jackson to use only field accessors.
* This way, the &quot;@JacksonXmlProperty&quot; annotated methods can generate specific XML (ie namespaces)
*  but they're not triggered at Json serialization
 */
@JsonAutoDetect(
        fieldVisibility = JsonAutoDetect.Visibility.ANY,
        getterVisibility = JsonAutoDetect.Visibility.NONE
)
@JsonPropertyOrder({
        &quot;distributionID&quot;,
        &quot;senderID&quot;,
        &quot;dateTimeSent&quot;,
        &quot;dateTimeExpires&quot;,
        &quot;distributionStatus&quot;,
        &quot;distributionKind&quot;,
        &quot;descriptor&quot;
})
@JacksonXmlRootElement(localName = &quot;edxlDistribution&quot;)
@JsonInclude(JsonInclude.Include.NON_EMPTY)
@JsonIgnoreProperties(ignoreUnknown = true)
public class EdxlEnvelope {

    @JsonProperty(value = &quot;distributionID&quot;, required = true)
    private String distributionID;

    @JsonProperty(value = &quot;senderID&quot;, required = true)
    private String senderID;

    @JsonProperty(value = &quot;dateTimeSent&quot;, required = true)
    private OffsetDateTime dateTimeSent;

    @JsonProperty(value = &quot;dateTimeExpires&quot;, required = true)
    private OffsetDateTime dateTimeExpires;

    @JsonProperty(value = &quot;distributionStatus&quot;, required = true)
    private DistributionStatus distributionStatus;

    @JsonProperty(value = &quot;distributionKind&quot;, required = true)
    private DistributionKind distributionKind;

    @JsonProperty(value = &quot;descriptor&quot;, required = true)
    private Descriptor descriptor;

<span class="fc" id="L70">    public EdxlEnvelope(String distributionID, String senderID, OffsetDateTime dateTimeSent, OffsetDateTime dateTimeExpires, DistributionStatus distributionStatus, DistributionKind distributionKind, Descriptor descriptor) {</span>
<span class="fc" id="L71">        this.distributionID = distributionID;</span>
<span class="fc" id="L72">        this.senderID = senderID;</span>
<span class="fc" id="L73">        this.dateTimeSent = dateTimeSent;</span>
<span class="fc" id="L74">        this.dateTimeExpires = dateTimeExpires;</span>
<span class="fc" id="L75">        this.distributionStatus = distributionStatus;</span>
<span class="fc" id="L76">        this.distributionKind = distributionKind;</span>
<span class="fc" id="L77">        this.descriptor = descriptor;</span>
<span class="fc" id="L78">    }</span>

    /*
    * This is a workaround to handle namespaces with prefixes
    * see https://stackoverflow.com/questions/16442805/jackson-xml-deserializing-xml-with-namespace-prefixes
     */
    @JacksonXmlProperty(localName = &quot;xlink:type&quot;, isAttribute = true)
    public String getXmlnsXlinkType() {
<span class="fc" id="L86">        return &quot;extended&quot;;</span>
    }

    @JacksonXmlProperty(localName = &quot;xmlns&quot;, isAttribute = true)
    public String getXmlns() {
<span class="fc" id="L91">        return &quot;urn:oasis:names:tc:emergency:EDXL:DE:2.0&quot;;</span>
    }

    @JacksonXmlProperty(localName = &quot;xmlns:xlink&quot;, isAttribute = true)
    public String getXmlnsXlink() {
<span class="fc" id="L96">        return &quot;http://www.w3.org/1999/xlink&quot;;</span>
    }

    @JacksonXmlProperty(localName = &quot;xmlns:ct&quot;, isAttribute = true)
    public String getXmlnsCt() {
<span class="fc" id="L101">        return &quot;urn:oasis:names:tc:emergency:edxl:ct:1.0&quot;;</span>
    }

<span class="fc" id="L104">    public EdxlEnvelope() {</span>
<span class="fc" id="L105">    }</span>

    public String getDistributionID() {
<span class="fc" id="L108">        return distributionID;</span>
    }

    public void setDistributionID(String distributionID) {
<span class="fc" id="L112">        this.distributionID = distributionID;</span>
<span class="fc" id="L113">    }</span>

    public String getSenderID() {
<span class="fc" id="L116">        return senderID;</span>
    }

    public void setSenderID(String senderID) {
<span class="fc" id="L120">        this.senderID = senderID;</span>
<span class="fc" id="L121">    }</span>

    public OffsetDateTime getDateTimeSent() {
<span class="fc" id="L124">        return dateTimeSent;</span>
    }

    public void setDateTimeSent(OffsetDateTime dateTimeSent) {
<span class="fc" id="L128">        this.dateTimeSent = dateTimeSent;</span>
<span class="fc" id="L129">    }</span>

    public OffsetDateTime getDateTimeExpires() {
<span class="fc" id="L132">        return dateTimeExpires;</span>
    }

    public void setDateTimeExpires(OffsetDateTime dateTimeExpires) {
<span class="fc" id="L136">        this.dateTimeExpires = dateTimeExpires;</span>
<span class="fc" id="L137">    }</span>

    public DistributionStatus getDistributionStatus() {
<span class="fc" id="L140">        return distributionStatus;</span>
    }

    public void setDistributionStatus(DistributionStatus distributionStatus) {
<span class="fc" id="L144">        this.distributionStatus = distributionStatus;</span>
<span class="fc" id="L145">    }</span>

    public DistributionKind getDistributionKind() {
<span class="fc" id="L148">        return distributionKind;</span>
    }

    public void setDistributionKind(DistributionKind distributionKind) {
<span class="fc" id="L152">        this.distributionKind = distributionKind;</span>
<span class="fc" id="L153">    }</span>

    public Descriptor getDescriptor() {
<span class="fc" id="L156">        return descriptor;</span>
    }

    public void setDescriptor(Descriptor descriptor) {
<span class="fc" id="L160">        this.descriptor = descriptor;</span>
<span class="fc" id="L161">    }</span>

    @Override
    public boolean equals(Object o) {
<span class="pc bpc" id="L165" title="1 of 2 branches missed.">        if (this == o) return true;</span>
<span class="pc bpc" id="L166" title="2 of 4 branches missed.">        if (o == null || getClass() != o.getClass()) return false;</span>
<span class="fc" id="L167">        EdxlEnvelope that = (EdxlEnvelope) o;</span>
<span class="fc" id="L168">        return</span>
<span class="pc bpc" id="L169" title="1 of 2 branches missed.">                distributionID.equals(that.distributionID) &amp;&amp;</span>
<span class="pc bpc" id="L170" title="1 of 2 branches missed.">                senderID.equals(that.senderID) &amp;&amp;</span>
<span class="pc bpc" id="L171" title="1 of 2 branches missed.">                dateTimeSent.equals(that.dateTimeSent) &amp;&amp;</span>
<span class="pc bpc" id="L172" title="3 of 6 branches missed.">                dateTimeExpires.equals(that.dateTimeExpires) &amp;&amp;</span>
                distributionStatus == that.distributionStatus &amp;&amp;
                distributionKind == that.distributionKind &amp;&amp;
<span class="pc bpc" id="L175" title="1 of 2 branches missed.">                descriptor.equals(that.descriptor);</span>
    }

    @Override
    public int hashCode() {
<span class="nc" id="L180">        return Objects.hash(distributionID, senderID, dateTimeSent, dateTimeExpires, distributionStatus, distributionKind, descriptor);</span>
    }

    @Override
    public String toString() {
<span class="nc" id="L185">        return &quot;class EdxlMessage {\n&quot; +</span>
<span class="nc" id="L186">                &quot;    distributionID: &quot; + toIndentedString(distributionID) + &quot;\n&quot; +</span>
<span class="nc" id="L187">                &quot;    senderId: &quot; + toIndentedString(senderID) + &quot;\n&quot; +</span>
<span class="nc" id="L188">                &quot;    dateTimeSent: &quot; + toIndentedString(dateTimeSent) + &quot;\n&quot; +</span>
<span class="nc" id="L189">                &quot;    dateTimeExpires: &quot; + toIndentedString(dateTimeExpires) + &quot;\n&quot; +</span>
<span class="nc" id="L190">                &quot;    distributionStatus: &quot; + toIndentedString(distributionStatus) + &quot;\n&quot; +</span>
<span class="nc" id="L191">                &quot;    distributionKind: &quot; + toIndentedString(distributionKind) + &quot;\n&quot; +</span>
<span class="nc" id="L192">                &quot;    descriptor: &quot; + toIndentedString(descriptor) + &quot;\n&quot; +</span>
                &quot;}&quot;;
    }

    /**
     * Convert the given object to string with each line indented by 4 spaces
     * (except the first line).
     */
    private String toIndentedString(Object o) {
<span class="nc bnc" id="L201" title="All 2 branches missed.">        if (o == null) {</span>
<span class="nc" id="L202">            return &quot;null&quot;;</span>
        }
<span class="nc" id="L204">        return o.toString().replace(&quot;\n&quot;, &quot;\n    &quot;);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>