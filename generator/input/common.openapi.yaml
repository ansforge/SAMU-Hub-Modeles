openapi: '3.0.0'

components:
  schemas:
    DistributionElement:
      type: object
      title: DistributionElement
      required:
        - messageId
        - sender
        - sentAt
        - kind
        - status
        - recipients
      properties:
        messageId:
          type: string
        sender:
          $ref: '#/components/schemas/sender'
        sentAt:
          type: string
          pattern: \d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}[\-+]\d{2}:\d{2}
          format: date-time
        kind:
          type: string
          enum:
            - Report
            - Update
            - Cancel
            - Ack
            - Error
        status:
          type: string
          enum:
            - Actual
            - Exercise
            - System
        recipients:
          type: array
          items:
            $ref: '#/components/schemas/recipient'
          minItems: 1
    sender:
      type: object
      required:
        - name
        - URI
      properties:
        name:
          type: string
        URI:
          type: string
    recipient:
      type: object
      required:
        - name
        - URI
      properties:
        name:
          type: string
        URI:
          type: string
    ReferenceWrapper:
      required:
        - Reference
      allOf:
        - $ref: '#/components/schemas/DistributionElement'
      properties:
        Reference:
          $ref: '#/components/schemas/Reference'
    Reference:
      properties:
        distributionID:
          type: string
      required:
        - distributionID