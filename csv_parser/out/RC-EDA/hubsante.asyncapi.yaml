asyncapi: 2.5.0
info:
  title: Hub Sante AMQP API
  version: '0.9'
  description: "L'API Hub Sante AMQP permet le partage d'informations entre acteurs\
    \ du monde de la sant\xC3\xA9.\n"
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0
servers:
  remote:
    url: messaging.hub.esante.gouv.fr:5671
    protocol: amqps
    protocolVersion: 0-9-1
    description: "Instance \"bac \xC3\_ sable\" du Hub Sante d\xC3\xA9ploy\xC3\xA9\
      e dans le Cloud."
    security:
    - tlsAuth: []
  local:
    url: localhost:5671
    protocol: amqps
    protocolVersion: 0-9-1
    description: "Instance locale du Hub Sante port\xC3\xA9e par `minikube` dans le\
      \ repo du Hub"
    security:
    - tlsAuth: []
defaultContentType: application/json
channels:
  '{clientId}.message':
    description: "File sp\xC3\xA9cifique \xC3\_ chaque client pour la r\xC3\xA9ception\
      \ de messages"
    parameters:
      clientId:
        $ref: '#/components/parameters/clientId'
    subscribe:
      summary: Message fonctionnel
      operationId: receiveMessage
      message:
        $ref: '#/components/messages/edxlMessage'
    publish:
      summary: Message fonctionnel
      operationId: publishMessage
      message:
        $ref: '#/components/messages/edxlMessage'
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: hubsante
          type: topic
          durable: true
          autoDelete: false
          vhost: /
  '{clientId}.ack':
    description: "File sp\xC3\xA9cifique \xC3\_ chaque client pour la r\xC3\xA9ception\
      \ des acquittements de bonne r\xC3\xA9ception"
    parameters:
      clientId:
        $ref: '#/components/parameters/clientId'
    subscribe:
      summary: Acquittement fonctionnel
      operationId: receiveAck
      message:
        $ref: '#/components/messages/edxlMessage'
    publish:
      summary: "Acquittements de bonne r\xC3\xA9ception"
      operationId: publishAck
      message:
        $ref: '#/components/messages/edxlMessage'
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: hubsante
          type: topic
          durable: true
          autoDelete: false
          vhost: /
  '{clientId}.info':
    description: "File sp\xC3\xA9cifique \xC3\_ chaque client pour la r\xC3\xA9ception\
      \ des informations compl\xC3\xA9mentaires li\xC3\xA9es au fonctionnement et\
      \ aux \xC3\xA9changes port\xC3\xA9s par le Hub Sant\xC3\xA9"
    parameters:
      clientId:
        $ref: '#/components/parameters/clientId'
    subscribe:
      summary: "Informations compl\xC3\xA9mentaires"
      operationId: receiveInfo
      message:
        $ref: '#/components/messages/edxlMessage'
    publish:
      summary: "Informations compl\xC3\xA9mentaires"
      operationId: publishInfo
      message:
        $ref: '#/components/messages/edxlMessage'
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: hubsante
          type: topic
          durable: true
          autoDelete: false
          vhost: /
components:
  securitySchemes:
    tlsAuth:
      type: X509
      description: "Un certificat issu d'une AC valid\xC3\xA9e par le Hub est n\xC3\
        \xA9cessaire pour l'authentification mTLS"
  parameters:
    clientId:
      description: L'identifiant du client
      schema:
        type: string
  messages:
    edxlMessage:
      title: Message au standard EDXL
      summary: "Message au standard EDXL transportable par le Hub, comportant une\
        \ partie adressage et une partie contenu. La partie contenu peut respecter\
        \ diff\xC3\xA9rentes sp\xC3\xA9cifications fonctionnelles."
      payload:
        $ref: '#/components/schemas/EdxlMessage'
  schemas:
    EdxlMessage:
      properties:
        distributionID:
          type: string
        senderID:
          type: string
        dateTimeSent:
          type: string
          format: date-time
        dateTimeExpires:
          type: string
          format: date-time
        distributionStatus:
          $ref: '#/components/schemas/DistributionStatus'
        distributionKind:
          $ref: '#/components/schemas/DistributionKind'
        descriptor:
          $ref: '#/components/schemas/Descriptor'
        content:
          $ref: '#/components/schemas/Content'
      additionalProperties: false
      required:
      - distributionID
      - senderID
      - dateTimeSent
      - dateTimeExpires
      - distributionStatus
      - distributionKind
      - descriptor
      - content
    Content:
      properties:
        contentObject:
          $ref: '#/components/schemas/ContentObject'
      additionalProperties: false
      required:
      - contentObject
    ContentObject:
      oneOf:
      - $ref: '#/components/schemas/JsonContent'
      - $ref: '#/components/schemas/ContentXML'
    JsonContent:
      properties:
        JsonContent:
          $ref: '#/components/schemas/EmbeddedJsonContent'
    ContentXML:
      properties:
        contentXML:
          $ref: '#/components/schemas/EmbeddedXMLContent'
    EmbeddedJsonContent:
      oneOf:
      - $ref: '#/components/schemas/CreateCase'
      - $ref: '#/components/schemas/Reference'
    EmbeddedXMLContent:
      oneOf:
      - $ref: '#/components/schemas/CreateCase'
      - $ref: '#/components/schemas/Reference'
    Descriptor:
      properties:
        language:
          type: string
        explicitAddress:
          $ref: '#/components/schemas/ExplicitAddress'
      additionalProperties: false
      required:
      - language
      - explicitAddress
    ExplicitAddress:
      properties:
        explicitAddressScheme:
          type: string
        explicitAddressValue:
          type: string
      additionalProperties: false
      required:
      - explicitAddressScheme
      - explicitAddressValue
    DistributionKind:
      type: string
      enum:
      - Report
      - Update
      - Cancel
      - Request
      - Response
      - Dispatch
      - Ack
      - Error
      - SensorConfiguration
      - SensorControl
      - SensorStatus
      - SensorDetection
      - Unknown
      - NoAppropriateDefault
    DistributionStatus:
      type: string
      enum:
      - Actual
      - Exercise
      - System
      - Test
      - Unknown
      - NoAppropriateDefault
    Reference:
      properties:
        distributionID:
          type: string
      required:
      - distributionID
    CreateCase:
      $id: http://json-schema.org/draft-07/schema#
      x-id: schema.json#
      example: example.json#
      type: object
      title: CreateCase
      required:
      - caseId
      - creation
      - referenceVersion
      - qualification
      - location
      properties:
        caseId:
          type: string
          title: Identifiant affaire
          x-cols: 6
          example: example.json#/caseId
          description: "Identifiant technique de l'affaire et partag\xE9 entre tous\
            \ les intervenants.\nIl doit pouvoir \xEAtre g\xE9n\xE9r\xE9 de fa\xE7\
            on unique et d\xE9centralis\xE9e et ne pr\xE9senter aucune ambigu\xEF\
            t\xE9. Il est g\xE9n\xE9r\xE9 par les syst\xE8mes du partenaire r\xE9\
            cepteur de la primo-demande de secours et contient une cl\xE9 conventionnelle\
            \ permettant d'identifier la source.\nValorisation :\n{cleConventionnelle}:{cleUnique}\n\
            o\xF9 cleConventionnelle est la cl\xE9 utilis\xE9e par le partenaire emetteur\
            \ et cleUnique l'identifiant locale d'affaire dans le syst\xE8me du partenaire\
            \ emetteur.\ncleUnique est une cha\xEEne de caract\xE8re (string) comprise\
            \ entre 4 et 22 caract\xE8res alphanum\xE9riques."
          examples:
          - samuA:CA126B445579GD4A67AV
        senderCaseId:
          type: string
          title: Identifiant local de l'affaire
          x-cols: 6
          example: example.json#/senderCaseId
          description: "Valoriser avec l'identifiant de l'affaire dans le SI de l'\xE9\
            metteur du message\nCe champ est facultatif, il ne sera notamment pas\
            \ transmis par NexSIS\nDans le cas o\xF9 deux op\xE9rateurs ont besoin\
            \ d'identifier une affaire, ils peuvent utiliser les derniers caract\xE8\
            res de l'identifiant local de leur partenaire."
          examples:
          - CA126B445579GD4A67AV
        creation:
          type: string
          title: "Date Heure de cr\xE9ation de l'affaire"
          x-cols: 6
          example: example.json#/creation
          description: "Groupe date heure de d\xE9but de partage li\xE9 \xE0 la cr\xE9\
            ation de l'affaire (et donc de g\xE9n\xE9ration du caseId). Il doit \xEA\
            tre renseign\xE9 \xE0 la fin du processus de la  cr\xE9ation  de la premi\xE8\
            re alerte. Lors de l'ajout d'alerte \xE0 une affaire ce champ ne doit\
            \ pas \xEAtre modifi\xE9.  L'indicateur de fuseau horaire Z ne doit pas\
            \ \xEAtre utilis\xE9."
          pattern: \d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}[\-+]\d{2}:\d{2}
          format: date-time
          examples:
          - '2022-09-27T08:23:34+02:00'
        referenceVersion:
          type: string
          title: "Version des nomenclatures du r\xE9f\xE9rentiel CISU"
          x-cols: 6
          example: example.json#/referenceVersion
          description: "Indique le num\xE9ro de version du r\xE9f\xE9rentiel des nomenclatures\
            \ des codes transmis. \nCela permet aux diff\xE9rents syst\xE8mes de s'assurer\
            \ qu'ils utilisent la m\xEAme version des codes de nomenclature que leurs\
            \ partenaires."
          examples:
          - '1.2'
        qualification:
          $ref: '#/definitions/qualification'
        location:
          $ref: '#/definitions/location'
        initialAlert:
          $ref: '#/definitions/alert'
        newAlert:
          type: array
          items:
            $ref: '#/definitions/alert'
        severity:
          type: string
          title: "Niveau d'urgence m\xE9dicale"
          x-cols: 6
          example: example.json#/severity
          description: "[Non utilis\xE9 dans une premi\xE8re version car la d\xE9\
            finition et l'usage restent \xE0 d\xE9finir]\nPr\xE9cise l'urgence m\xE9\
            dicale :\n        EXTREME : Menace extr\xEAme pour la vie\n        SEVERE\
            \ : Menace importante pour la vie\n        MODERATE - Menace possible\
            \ pour la vie\n        MINOR : Peu ou pas de menace connue pour la vie\n\
            \        UNKNOWN : Niveau de menace inconnu\nCe niveau de gravit\xE9 est\
            \ li\xE9 au Motif de Recours Medico-Secouriste associ\xE9 \xE0 l'appel."
          enum:
          - EXTREME
          - SEVERE
          - MODERATE
          - MINOR
          - UNKNOWN
          examples:
          - None
        additionalInformation:
          $ref: '#/definitions/additionalInformation'
        freetext:
          type: string
          title: Description de l'affaire
          x-cols: 6
          example: example.json#/freetext
          description: "Texte libre permettant de donner des informations suppl\xE9\
            mentaires concernant l'affaire"
          examples:
          - None
    qualification:
      type: object
      title: Qualification de l'affaire
      x-display: expansion-panels
      required:
      - whatsHappen
      properties:
        whatsHappen:
          $ref: '#/definitions/nomenclature'
        locationKind:
          $ref: '#/definitions/nomenclature'
        riskThreat:
          type: array
          items:
            $ref: '#/definitions/nomenclature'
        healthMotive:
          $ref: '#/definitions/nomenclature'
        victims:
          $ref: '#/definitions/victims'
      example: example.json#/qualification
    location:
      type: object
      title: Localisation de l'affaire
      x-display: expansion-panels
      required:
      - locID
      - locLabel
      - name
      - country
      properties:
        locID:
          type: string
          title: Identifiant technique de localisation
          x-cols: 6
          example: example.json#/location/locID
          description: "ID technique et provisoire permettant d'identifier le lieu\
            \ dans le cadre des \xE9changes de cette affaire."
          examples:
          - 111fb03a-6fd9-41e0-8e81-990c45188887
        locLabel:
          type: string
          title: "R\xE9sum\xE9 de la localisation"
          x-cols: 6
          example: example.json#/location/locLabel
          description: "Correspond \xE0 l'\xE9tiquette associ\xE9e \xE0 la localisation\
            \ (plut\xF4t \xE0 destination des humains).\nElle va souvent correspondre\
            \ \xE0 la concat\xE9nation suivant des r\xE8gles m\xE9tiers de diff\xE9\
            rentes informations, dont le \"name\" (toponyme) et l'adresse."
          examples:
          - "Lyc\xE9e Pierre de Coubertin - 12 rue de l'Amiti\xE9 77288 Melun, Mus\xE9\
            e Bossuet - Acc\xE8s 2 - 77048 Saint-Albray"
        name:
          type: string
          title: Nom du lieu
          x-cols: 6
          example: example.json#/location/name
          description: "Indique le nom de lieu : nom commercial, lieu-dit, lac, for\xEA\
            t, nom de quartier (plut\xF4t \xE0 destination des syst\xE8mes)."
          examples:
          - "Carrefour Toison d'Or, EPHAD Belle Fontaine, Quartier Melun Nord, Disneyland,\
            \ \u2026"
        addressDetailed:
          $ref: '#/definitions/address'
        city:
          $ref: '#/definitions/city'
        access:
          $ref: '#/definitions/access'
        geometry:
          $ref: '#/definitions/geometry'
        externalInfo:
          type: array
          items:
            $ref: '#/definitions/externalInfo'
        country:
          type: string
          title: Pays
          x-cols: 6
          example: example.json#/location/country
          enum:
          - France
          - Allemagne
          - Espagne
          - Italie
          - Suisse
          - Luxembourg
          - Belgique
          examples:
          - France
        freetext:
          type: string
          title: Commentaire
          x-cols: 6
          example: example.json#/location/freetext
          description: "Champ libre pour compl\xE9ter les informations de localisation"
          examples:
          - "Cl\xE9 derri\xE8re le pot de fleur"
      example: example.json#/location
    alert:
      type: object
      title: Alerte initiale
      x-display: expansion-panels
      required:
      - id
      - reception
      - reporting
      - caller
      - sourceContact
      - location
      - qualification
      - callTaker
      properties:
        id:
          type: string
          title: Identifiant alerte
          x-cols: 6
          example: example.json#/initialAlert/id
          description: "Identifiant technique unique de l'alerte. Il doit pouvoir\
            \ \xEAtre g\xE9n\xE9r\xE9 automatiquement par le syst\xE8me \xE9metteur\
            \ et ne doit pas avoir de signification / utilisation particuli\xE8re\
            \ par les diff\xE9rents syst\xE8mes pour garantir leur d\xE9couplage.\n\
            Voir la description de l'identifiant de l'affaire pour voir le format.\n\
            Lorsqu\u2019une alerte est g\xE9n\xE9r\xE9e dans NexSIS et cr\xE9e une\
            \ affaire, elle est qualifi\xE9e d\u2019Alerte Initiale.\na)\tSi cette\
            \ derni\xE8re concerne un partenaire (caract\xE8re m\xE9dical pour la\
            \ Sant\xE9 par exemple), elle est relay\xE9e seule dans le message. Il\
            \ y\u2019a un seul objet initialAlert.\nb)\tSinon, une autre alerte li\xE9\
            e \xE0 la m\xEAme affaire peut \xEAtre d\xE9clar\xE9e ult\xE9rieurement,\
            \ concernant cette fois le partenaire. Lorsqu\u2019elle est d\xE9clar\xE9\
            e cette Nouvelle Alerte est relay\xE9e avec l\u2019Alerte Initiale pour\
            \ partager un contexte commun. Dans le message de cr\xE9ation d\u2019\
            affaire il y\u2019a deux objets alerte : initialAlert et newAlert.\nLe\
            \ rattachement des messages \xE0 une affaire doivent s'appuyer sur les\
            \ caseId et non les alertId qui peuvent varier d'un syst\xE8me \xE0 l'autre."
          examples:
          - SAMU050-20230605-AL0123
        reception:
          type: string
          title: "Date de r\xE9ception de l'alerte"
          x-cols: 6
          example: example.json#/initialAlert/reception
          description: "Groupe date heure de r\xE9ception de l'alerte"
          pattern: \d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}[\-+]\d{2}:\d{2}
          format: date-time
          examples:
          - '2022-09-27T08:21:06+02:00'
        reporting:
          type: string
          title: Signalement
          x-cols: 6
          example: example.json#/initialAlert/reporting
          description: "Permet d'attirer l'attention des forces partenaires sur une\
            \ affaire pour le faire sortir du lot.\nEventuellement automatis\xE9 en\
            \ fonction des crit\xE8res saisis et de leur param\xE9trage, ou renseign\xE9\
            \ par l'op\xE9rateur. \nPrend les valeurs d\xE9finies dans la nomenclature\
            \ CISU :\n- standard : STANDARD\n- signal\xE9 : ATTENTION\nLes syst\xE8\
            mes peuvent proposer des fonctionnalit\xE9s faisant ressortir les dossiers\
            \ avec le libell\xE9 ATTENTION"
          enum:
          - STANDARD
          - ATTENTION
          examples:
          - STANDARD
        freetext:
          type: string
          title: "Informations compl\xE9mentaires sur l'alerte"
          x-cols: 6
          example: example.json#/initialAlert/freetext
          description: "Texte libre permettant de donner des informations suppl\xE9\
            mentaires concernant l'alerte"
          examples:
          - "D\xE9clenchement t\xE9l\xE9alarme, voisine sur les liens"
        caller:
          $ref: '#/definitions/caller'
        sourceContact:
          $ref: '#/definitions/contact'
        location:
          $ref: '#/definitions/location'
        qualification:
          $ref: '#/definitions/qualification'
        callTaker:
          $ref: '#/definitions/callTaker'
        attachment:
          type: array
          items:
            $ref: '#/definitions/attachment'
      example: example.json#/initialAlert
    additionalInformation:
      type: object
      title: "Informations compl\xE9mentaires"
      x-display: expansion-panels
      required: []
      properties:
        customMap:
          $ref: '#/definitions/customMap'
      example: example.json#/additionalInformation
    nomenclature:
      type: object
      title: Nature de fait
      x-display: expansion-panels
      required:
      - code
      - label
      properties:
        code:
          type: string
          title: Code
          x-cols: 6
          example: example.json#/qualification/whatsHappen/code
          description: "A valoriser avec un code la nomenclature associ\xE9e"
          examples:
          - C07.13.02
        label:
          type: string
          title: "Libell\xE9"
          x-cols: 6
          example: example.json#/qualification/whatsHappen/label
          description: "A valoriser avec le libell\xE9 de la nomenclature associ\xE9\
            e.\nDans le cas o\xF9 un syst\xE8me n'est pas en mesure de reconna\xEE\
            tre un code, il peut directement afficher le libell\xE9 qui est obligatoirement\
            \ fourni avec le code."
          examples:
          - "Rod\xE9o automobile"
        freetext:
          type: string
          title: Commentaire
          x-cols: 6
          example: example.json#/qualification/whatsHappen/freetext
          description: "Permet de compl\xE9menter en commentaire libre l'attribut\
            \ permettant de qualifier l'\xE9v\xE9nement."
          examples:
          - None
      example: example.json#/qualification/whatsHappen
      examples:
      - code: C07.13.02
        label: "Rod\xE9o automobile"
        freetext: None
    victims:
      type: object
      title: Patients/Victimes
      x-display: expansion-panels
      required: []
      properties:
        count:
          type: string
          title: Nombre de patients-victimes
          x-cols: 6
          example: example.json#/qualification/victims/count
          description: "Indique le nombre de victimes selon la nomenclature du r\xE9\
            f\xE9rentiel CISU"
          enum:
          - '0'
          - '1'
          - SEVERAL
          - MANY
          - UNKNOWN (voir Nomenclature CISU XX)
          examples:
          - SEVERAL
        mainVictim:
          type: string
          title: Type du patient-victime principal
          x-cols: 6
          example: example.json#/qualification/victims/mainVictim
          description: "Identifie le type de la principale victime (celle dont l'\xE9\
            tat de sant\xE9 provoque le d\xE9clenchement de l'envoi des secours).\
            \ Prend les valeurs du r\xE9f\xE9rentiel CISU. Entre dans la d\xE9termination\
            \ des partenaires impliqu\xE9s par NexSIS."
          enum:
          - INFANT
          - CHILD
          - ADULT
          - PREGNANT
          - SENIOR (voir Nomenclature CISU XX)
          examples:
          - CHILD
        freetext:
          type: string
          title: "Informations compl\xE9mentaires sur les patients-victimes"
          x-cols: 6
          example: example.json#/qualification/victims/freetext
          description: "Permet de compl\xE9menter en commentaire libre la(les) victime(s)"
          examples:
          - "Jeanne Dupont, 6 ans, ne r\xE9pond plus"
      example: example.json#/qualification/victims
      examples:
      - count: SEVERAL
        mainVictim: CHILD
        freetext: "Jeanne Dupont, 6 ans, ne r\xE9pond plus"
    address:
      type: object
      title: "D\xE9tails de l'adresse"
      x-display: expansion-panels
      required:
      - complete
      properties:
        complete:
          type: string
          title: "Num\xE9ro, type et nom de voie"
          x-cols: 6
          example: example.json#/location/addressDetailed/complete
          description: "Num\xE9ro, type et nom de la voie. \nUtilis\xE9 pour tout\
            \ type de voie :  autoroute (PK, nom et sens), voie ferr\xE9e, voie navigable\u2026\
            \nObligatoire et seule valeur des d\xE9tails de l'adresse fournie par\
            \ NexSIS."
          examples:
          - 9 Bd du Montparnasse
        number:
          type: string
          title: "Num\xE9ro dans la voie"
          x-cols: 6
          example: example.json#/location/addressDetailed/number
          description: "Num\xE9ro dans l'adresse (inclut point kilom\xE9trique sur\
            \ l'autoroute, voie ferr\xE9e ou voie navigable). Inclut l'indice de r\xE9\
            p\xE9tition associ\xE9 au num\xE9ro (par exemple bis, a\u2026)."
          examples:
          - "9, 4bis, PK10, \u2026"
        wayName:
          $ref: '#/definitions/wayName'
      example: example.json#/location/addressDetailed
    city:
      type: object
      title: "D\xE9tails de la commune"
      x-display: expansion-panels
      required: []
      properties:
        name:
          type: string
          title: Nom de la commune
          x-cols: 6
          example: example.json#/location/city/name
          description: Nom officiel de la commune actuelle
          examples:
          - Lille
        inseeCode:
          type: string
          title: Code INSEE de la commune
          x-cols: 6
          example: example.json#/location/city/inseeCode
          description: "Code INSEE de la commune actuelle sur la base du Code Officiel\
            \ g\xE9ographique en vigueur. Obligatoire si le nom de la commune est\
            \ renseign\xE9."
          pattern: '[0-9]{5}'
          examples:
          - 59350
        detail:
          type: string
          title: "Compl\xE9ment de commune"
          x-cols: 6
          example: example.json#/location/city/detail
          description: "Informations compl\xE9mentaires permettant de pr\xE9ciser\
            \ le quartier, lieu-dit, ancienne commune, \u2026 ou autre information\
            \ aidant \xE0 pr\xE9ciser l'adresse et notamment g\xE9rer les cas de communes\
            \ fusionn\xE9es pour le syst\xE8me \xE9metteur\nNB : dans tous les cas,\
            \ la localisation GPS de la commune doit \xEAtre fournie afin d'\xE9viter\
            \ une trop forte ambigu\xEFt\xE9"
          examples:
          - "Quartie Melun Nord, Lhomme, \u2026"
      example: example.json#/location/city
      examples:
      - name: Lille
        inseeCode: 59350
        detail: "Quartie Melun Nord, Lhomme, \u2026"
    access:
      type: object
      title: "D\xE9tails d'acc\xE8s"
      x-display: expansion-panels
      required: []
      properties:
        floor:
          type: string
          title: Etage
          x-cols: 6
          example: example.json#/location/access/floor
          description: 'Etage '
          examples:
          - "RDC, 1, 2, \u2026"
        roomNumber:
          type: string
          title: "Num\xE9ro de porte"
          x-cols: 6
          example: example.json#/location/access/roomNumber
          description: "Sp\xE9cifie num\xE9ro d'appartement, de chambre, de bureau"
          examples:
          - "A16, 37, 104, \u2026"
        interphone:
          type: string
          title: Interphone
          x-cols: 6
          example: example.json#/location/access/interphone
          description: "Indique les informations n\xE9cessaires  \xE0 l'identification\
            \ de l'interphone (num\xE9ro, nom)"
          examples:
          - Dupont
        accessCode:
          type: array
          items:
            type: string
            title: Digicode
            x-cols: 6
            example: example.json#/location/access/accessCode/0
            description: "Indique le ou les digicodes dans l'ordre de progression\
              \ dans le b\xE2timent"
            examples:
            - '[''1234A'', ''4321B'']'
        elevator:
          type: string
          title: Ascenseur/escalier
          x-cols: 6
          example: example.json#/location/access/elevator
          description: 'Indique l''ascenseur ou la cage d''escalier '
          examples:
          - C3
        buildingName:
          type: string
          title: "B\xE2timent"
          x-cols: 6
          example: example.json#/location/access/buildingName
          description: "Nom du b\xE2timent"
          examples:
          - Batiment B, Batiment Maunoury
        entrance:
          type: string
          title: "Entr\xE9e"
          x-cols: 6
          example: example.json#/location/access/entrance
          examples:
          - "Zone Sud, Porte 1, \u2026"
        entity:
          type: string
          title: Service
          x-cols: 6
          example: example.json#/location/access/entity
          description: "Nom du service concern\xE9 au sein de l'\xE9tablissement"
          examples:
          - "Infirmerie, service finance, service cardiologie, \u2026"
      example: example.json#/location/access
    geometry:
      type: object
      title: "G\xE9ometrie associ\xE9e"
      x-display: expansion-panels
      required: []
      properties:
        point:
          $ref: '#/definitions/point'
        sketch:
          type: string
          title: "Formes g\xE9om\xE9triques"
          x-cols: 6
          example: example.json#/location/geometry/sketch
          examples:
          - None
      example: example.json#/location/geometry
    externalInfo:
      type: object
      title: "Liens aux syst\xE8mes externes"
      x-display: expansion-panels
      required:
      - freetext
      - type
      - uri
      properties:
        freetext:
          type: string
          title: Nom de la source
          x-cols: 6
          example: example.json#/location/externalInfo/0/freetext
          description: "Syst\xE8me fournissant le localisant :  NexSiS ou l'ORG_ID\
            \ (BAN, IGN, ...)"
          enum:
          - BAN
          - IGN
          - NexSIS
          examples:
          - "NexSIS, BAN, IGN, \u2026"
        type:
          type: string
          title: 'Type '
          x-cols: 6
          example: example.json#/location/externalInfo/0/type
          description: "D\xE9finition du type d'objet dans le syst\xE8me\nEx : SIG\
            \ NexSIS / OSM ont plusieurs types de donn\xE9es -> savoir du quel on\
            \ parle (POI, tron\xE7on de route, \u2026) pour faciliter le filtre |\
            \ Aussi table dans une base de donn\xE9es"
          examples:
          - "ega, egr, egm, DIO (donn\xE9es d'influence op\xE9rationnelle), \u2026"
        uri:
          type: string
          title: Identifiant
          x-cols: 6
          example: example.json#/location/externalInfo/0/uri
          description: 'Identifiant unique dans le type. Exemple : UUID d''un ega'
          examples:
          - id987
      example: example.json#/location/externalInfo/0
      examples:
      - freetext: "NexSIS, BAN, IGN, \u2026"
        type: "ega, egr, egm, DIO (donn\xE9es d'influence op\xE9rationnelle), \u2026"
        uri: id987
    wayName:
      type: object
      title: Type et nom de voie
      x-display: expansion-panels
      required:
      - complete
      properties:
        complete:
          type: string
          title: Type et nom
          x-cols: 6
          example: example.json#/location/addressDetailed/wayName/complete
          description: "Type et nom de la voie (venant d'un r\xE9f\xE9rentiel ou non)\n\
            Si les champs type et name sont renseign\xE9s, le champ callerName doit\
            \ \xEAtre valoris\xE9 ainsi : \"{type} {nom}\"."
          examples:
          - Boulevard du Montparnasse
        type:
          type: string
          title: Type
          x-cols: 6
          example: example.json#/location/addressDetailed/wayName/type
          examples:
          - Boulevard
        name:
          type: string
          title: Nom
          x-cols: 6
          example: example.json#/location/addressDetailed/wayName/name
          examples:
          - du Montparnasse
      example: example.json#/location/addressDetailed/wayName
      examples:
      - complete: Boulevard du Montparnasse
        type: Boulevard
        name: du Montparnasse
    point:
      type: object
      title: 'Point '
      x-display: expansion-panels
      required:
      - coord
      properties:
        coord:
          $ref: '#/definitions/coord'
        sysCoord:
          type: string
          title: "Syst\xE8me de coordonn\xE9es"
          x-cols: 6
          example: example.json#/location/geometry/point/sysCoord
          description: "Indique le type de coordonn\xE9es utilis\xE9. Actuellement,\
            \ la seule valeur valide est \xABEPSG-4326\xBB, indiquant l'utilisation\
            \ de WGS-84. Si ce champ n'est pas renseign\xE9, on consid\xE8re que la\
            \ valeur par d\xE9faut est \xABEPSG-4326\xBB."
          examples:
          - EPSG-4326
      example: example.json#/location/geometry/point
    coord:
      type: object
      title: "Coordonn\xE9es"
      x-display: expansion-panels
      required:
      - lat
      - lon
      - precision
      properties:
        lat:
          type: number
          title: Latitude
          x-cols: 6
          example: example.json#/location/geometry/point/coord/lat
          description: "Latitude du point cl\xE9 de la localisation"
          examples:
          - '48.866667'
        lon:
          type: number
          title: Longitude
          x-cols: 6
          example: example.json#/location/geometry/point/coord/lon
          description: "Longitude du point cl\xE9 de la localisation"
          examples:
          - '2.333333'
        height:
          type: number
          title: 'Altitude '
          x-cols: 6
          example: example.json#/location/geometry/point/coord/height
          description: "Altitude du point cl\xE9 de la localisation, en m\xE8tre,\
            \ ignor\xE9 c\xF4t\xE9 NexSIS."
          examples:
          - 120
        heading:
          type: number
          title: Cap
          x-cols: 6
          example: example.json#/location/geometry/point/coord/heading
          description: "En degr\xE9"
          examples:
          - 96
        speed:
          type: number
          title: Vitesse
          x-cols: 6
          example: example.json#/location/geometry/point/coord/speed
          description: "Vitesse en km/h, notamment fournie par eCall, tel, nouveau\
            \ AML, \u2026"
          examples:
          - 34
        precision:
          type: string
          title: "Pr\xE9cision"
          x-cols: 6
          example: example.json#/location/geometry/point/coord/precision
          description: "Indique via une nomenclature le niveau de pr\xE9cision des\
            \ coordonn\xE9es fournies par le syst\xE8me emetteur.\nCITY=Pr\xE9cision\
            \ \xE0 l'\xE9chelle de la ville, STREET=Pr\xE9cision \xE0 l'\xE9chelle\
            \ de la rue, ADDRESS=Adresse pr\xE9cise, EXACT=Point coordonn\xE9e GPS\
            \ exact, UNKNOWN=Pr\xE9cision de la localisation non \xE9valuable par\
            \ l'\xE9metteur"
          enum:
          - CITY
          - STREET
          - ADDRESS
          - EXACT
          - UNKNOWN
          examples:
          - ADDRESS
      example: example.json#/location/geometry/point/coord
      examples:
      - lat: '48.866667'
        lon: '2.333333'
        height: 120
        heading: 96
        speed: 34
        precision: ADDRESS
    caller:
      type: object
      title: "Requ\xE9rant"
      x-display: expansion-panels
      required: []
      properties:
        callerContact:
          $ref: '#/definitions/contact'
        callbackContact:
          $ref: '#/definitions/contact'
        language:
          type: string
          title: "Langue parl\xE9e"
          x-cols: 6
          example: example.json#/initialAlert/caller/language
          description: "Langue parl\xE9e par le requ\xE9rant. Permet de mettre en\
            \ place des traducteurs si besoin. Utilise la nomenclature LANGUE du SI-SAMU."
          examples:
          - FR
        freetext:
          type: string
          title: "Informations sur le requ\xE9rant"
          x-cols: 6
          example: example.json#/initialAlert/caller/freetext
          description: "Information sur le requ\xE9rant : malentendant, impliqu\xE9\
            \ dans l'accident, \u2026\nLes informations peuvent \xEAtre pass\xE9es\
            \ sous forme de texte libre ou via une liste d'adjectif"
          examples:
          - "P\xE8re"
        detailedName:
          $ref: '#/definitions/detailedName'
      example: example.json#/initialAlert/caller
    contact:
      type: object
      title: Source de contact
      x-display: expansion-panels
      required:
      - type
      - detail
      - type
      - detail
      properties:
        type:
          type: string
          title: Type de contact de la source
          x-cols: 6
          example: example.json#/initialAlert/sourceContact/type
          description: "Type de l'URI utilis\xE9e par la source, cf. nomenclature\
            \ EMSI"
          enum:
          - PSTADD
          - EMLADD
          - IPADD
          - FTPADD
          - WWWADD
          - PHNADD
          - FAXADD
          - PMRADD
          examples:
          - PHNADD
        detail:
          type: string
          title: URI de contact de la source
          x-cols: 6
          example: example.json#/initialAlert/sourceContact/detail
          description: "Valeur de l'URI utilis\xE9e par la source"
          examples:
          - 0671830530
      example: example.json#/initialAlert/sourceContact
      examples:
      - type: PHNADD
        detail: 0671830530
    callTaker:
      type: object
      title: Agent
      x-display: expansion-panels
      required:
      - organization
      - controlRoom
      properties:
        organization:
          type: string
          title: Service d'urgence
          x-cols: 6
          example: example.json#/initialAlert/callTaker/organization
          description: "D\xE9crit la structure ou le service \xE0 laquelle est rattach\xE9\
            e l'agent (en fonction du niveau de pr\xE9cision disponible).\nSe r\xE9\
            f\xE9rer au DSF pour la structure norm\xE9e du champ \"organization\""
          examples:
          - samu44:chuNantes:crra:regulationN3
        controlRoom:
          type: string
          title: Centre d'appels
          x-cols: 6
          example: example.json#/initialAlert/callTaker/controlRoom
          description: "D\xE9crit le centre d'appel auquel est rattach\xE9 l'agent"
          examples:
          - CGA, CGO 21, CRRA 44, ...
        calltakerURI:
          $ref: '#/definitions/contact'
        calltakerId:
          type: string
          title: ID de l'agent
          x-cols: 6
          example: example.json#/initialAlert/callTaker/calltakerId
          description: "Identifiant unique de l'op\xE9rateur ayant trait\xE9 l'alerte"
          examples:
          - "id1234, carte CPx (Sant\xE9), id d'affectation, \u2026"
      example: example.json#/initialAlert/callTaker
      examples:
      - organization: samu44:chuNantes:crra:regulationN3
        controlRoom: CGA, CGO 21, CRRA 44, ...
        calltakerURI: {}
        calltakerId: "id1234, carte CPx (Sant\xE9), id d'affectation, \u2026"
    attachment:
      type: object
      title: "Pi\xE8ces jointes"
      x-display: expansion-panels
      required:
      - URI
      properties:
        description:
          type: string
          title: Type ou description de la ressource
          x-cols: 6
          example: example.json#/initialAlert/attachment/0/description
          description: "D\xE9crit la ressource en pr\xE9cisant le type et le contenu,\
            \ tels que \xABcarte\xBB ou \xABphoto\xBB"
          examples:
          - "photo, carte, \u2026"
        mimeType:
          type: string
          title: Type MIME
          x-cols: 6
          example: example.json#/initialAlert/attachment/0/mimeType
          description: "L'identifiant du type MIME de contenu et sous-type d\xE9crivant\
            \ la ressource"
          examples:
          - "PDF, XML, JPEG, \u2026"
        size:
          type: integer
          title: Taille approximative
          x-cols: 6
          example: example.json#/initialAlert/attachment/0/size
          description: Taille approximative de la ressource en kO
          examples:
          - "1235, 35, \u2026"
        URI:
          type: string
          title: URI
          x-cols: 6
          example: example.json#/initialAlert/attachment/0/URI
          description: "Une URI, g\xE9n\xE9ralement une URL, qui permet d'atteindre\
            \ la ressource sur Internet ou sur un r\xE9seau priv\xE9"
          pattern: (https?|ftp|file):\/\/([\w-]+(\.[\w-]+)*)(\/[\w\-\.]*)*\/?(\?[^\s]*)?
          examples:
          - https://hub.esante.gouv.fr/resourceExample
        derefURI:
          type: string
          title: URI base 64
          x-cols: 6
          example: example.json#/initialAlert/attachment/0/derefURI
          description: "Peut \xEAtre utilis\xE9 \xE0 la place de l'\xE9l\xE9ment 'URI'\
            \ pour envoyer la ressource encod\xE9e en base64 pour \xE9viter des probl\xE8\
            mes de transcodage (sur des double quotes qui casseraient le message,\
            \ \u2026)"
          examples:
          - None
        digest:
          type: string
          title: Hash
          x-cols: 6
          example: example.json#/initialAlert/attachment/0/digest
          description: "Hash de la ressource pour confirmer la r\xE9ception de la\
            \ bonne ressource\nA VALIDER : la ressource est hash\xE9e avec le protocole\
            \ SHA-256"
          examples:
          - None
      example: example.json#/initialAlert/attachment/0
      examples:
      - description: "photo, carte, \u2026"
        mimeType: "PDF, XML, JPEG, \u2026"
        size: "1235, 35, \u2026"
        URI: https://hub.esante.gouv.fr/resourceExample
        derefURI: None
        digest: None
    detailedName:
      type: object
      title: "Pr\xE9nom & nom usuel du requ\xE9rant"
      x-display: expansion-panels
      required:
      - completeName
      properties:
        completeName:
          type: string
          title: "Pr\xE9nom et nom"
          x-cols: 6
          example: example.json#/initialAlert/caller/detailedName/completeName
          description: "Pr\xE9nom et nom usuel du requ\xE9rant.\nSi les champs callerLastName\
            \ et callerFirstName sont renseign\xE9s, le champ callerName doit \xEA\
            tre valoris\xE9 ainsi : \"{callerFirstName} {callerLastName}\".\nNote\
            \ : NexSIS ne dispose que de ces informations (concat\xE9n\xE9es) et pas\
            \ de deux champs s\xE9par\xE9s."
          examples:
          - Jean Dupont
        lastName:
          type: string
          title: Nom
          x-cols: 6
          example: example.json#/initialAlert/caller/detailedName/lastName
          description: "Nom du requ\xE9rant"
          examples:
          - Dupont
        firstName:
          type: string
          title: "Pr\xE9nom"
          x-cols: 6
          example: example.json#/initialAlert/caller/detailedName/firstName
          description: "Pr\xE9nom du r\xE9qu\xE9rant.\nPar convention les pr\xE9noms\
            \ compos\xE9s doivent pr\xE9f\xE9rablement \xEAtre s\xE9par\xE9s par le\
            \ caract\xE8re \"-\""
          examples:
          - Jean
      example: example.json#/initialAlert/caller/detailedName
      examples:
      - completeName: Jean Dupont
        lastName: Dupont
        firstName: Jean
    customMap:
      type: object
      title: "Cl\xE9 valeur adaptable"
      x-display: expansion-panels
      required:
      - key
      - value
      properties:
        key:
          type: string
          title: "Cl\xE9"
          x-cols: 6
          example: example.json#/additionalInformation/customMap/key
          description: Nom de la balise
          examples:
          - neighborhood
        label:
          type: string
          title: "Libell\xE9"
          x-cols: 6
          example: example.json#/additionalInformation/customMap/label
          description: "Libell\xE9 correspondant"
          examples:
          - Quartier
        value:
          type: string
          title: Valeur
          x-cols: 6
          example: example.json#/additionalInformation/customMap/value
          description: "Valeur associ\xE9e \xE0 la cl\xE9"
          examples:
          - SECT.QUARTIER HISTORIQUE
        freetext:
          type: string
          title: "D\xE9tails"
          x-cols: 6
          example: example.json#/additionalInformation/customMap/freetext
          description: "Informations compl\xE9mentaires sur le contexte / utilisation\
            \ de ce matching additionnel"
          examples:
          - "Pr\xE9cision sur le quartier d'intervention"
      example: example.json#/additionalInformation/customMap
      examples:
      - key: neighborhood
        label: Quartier
        value: SECT.QUARTIER HISTORIQUE
        freetext: "Pr\xE9cision sur le quartier d'intervention"
