{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "classpath:/json-schema/schema#",
    "x-id": "EMSI.schema.json#",
    "version": "23.12.18",
    "example": "example.json#",
    "type": "object",
    "title": "emsi",
    "required": [
        "emsi"
    ],
    "properties": {
        "emsi": {
            "$ref": "#/definitions/emsi"
        }
    },
    "definitions": {
        "emsi": {
            "type": "object",
            "title": "Objet emsi",
            "x-display": "expansion-panels",
            "x-health-only": false,
            "required": [],
            "properties": {
                "RESOURCE": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/resource"
                    }
                }
            },
            "example": "example.json#/emsi"
        },
        "resource": {
            "type": "object",
            "title": "Ressource",
            "x-display": "expansion-panels",
            "x-health-only": true,
            "required": [
                "RTYPE"
            ],
            "properties": {
                "RTYPE": {
                    "$ref": "#/definitions/rtype"
                },
                "ID": {
                    "type": "string",
                    "title": "ID de la ressource",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/ID",
                    "description": "Identifiant unique de la ressource  dans le syst\u00e8me du partenaire propri\u00e9taire. Les syst\u00e8mes sont garants de l'unicit\u00e9 et de l'invariablit\u00e9 des ids de v\u00e9hicule dans le temps. Ils peuvent se servir des ids dans les r\u00e9f\u00e9rentiels existants si ils sont uniques et stables.\nDans le cas d'un v\u00e9hicule agr\u00e9g\u00e9 par un LRM (comme un SMUR), l'ID doit \u00eatre valoris\u00e9 avec son immatriculation.\nDans le cas d'un v\u00e9hicule agr\u00e9g\u00e9 par NexSIS, l'ID fournit peut ne pas correspondre \u00e0 une immatriculation."
                },
                "ORG_ID": {
                    "type": "string",
                    "title": "Identifiant de l'organisation propri\u00e9taire",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/ORG_ID",
                    "description": "Identifiant de l'organisation \u00e0 laquelle la ressource est rattach\u00e9e (caserne, SAMU etc).\nSe r\u00e9f\u00e9rer au DSF pour la structure norm\u00e9e des organisations\nLe format est le suivant {pays}.{domaine}.{code d\u00e9partement}.{organisation}.{structure interne}*.{unit\u00e9 fonctionnelle}*.\nDans le cas o\u00f9 le LRM/NexSIS sert d'aggr\u00e9gateur pour des v\u00e9hicules appartenant \u00e0 un partenaire tiers (type ambulance priv\u00e9e), l'identifiant d'organisation permet d'identifier ce tiers\nA constituer par le r\u00e9dacteur du pr\u00e9sent EMSI pour \u00eatre unique, identique \u00e0 <CONTEXT><ORIGIN><ORG_ID>"
                },
                "NAME": {
                    "type": "string",
                    "title": "Nom de la ressource",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/NAME",
                    "description": "Nom donn\u00e9 \u00e0 la ressource par le partenaire. L'immatriculation peut \u00eatre utilis\u00e9e dans le nom courant des v\u00e9hicules.\nDans le cas pompier, les v\u00e9hicules sont nomm\u00e9s\nDans le cas d'\u00e9quipier, cela peut \u00eatre leur nom"
                },
                "FREETEXT": {
                    "type": "string",
                    "title": "Description de la ressource",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/FREETEXT",
                    "description": "Texte libre permettant de d\u00e9crire la ressource o\u00f9 d'ajouter des pr\u00e9cisions sur son engagement.\nPermet aussi notamment de d\u00e9crire des attributs librement pour la ressource.\nPar exemple, pour un v\u00e9hicule, sa plaque d'immatriculation."
                },
                "RGEO": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/rgeo"
                    }
                },
                "QUANTITY": {
                    "type": "number",
                    "title": "Quantit\u00e9 de la ressource",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/QUANTITY",
                    "description": "Dans le cadre d'un \u00e9change d'op\u00e9ration, optionnel. Permet de quantifier une ressource :\n- \u00e0 ne pas utiliser pour les v\u00e9hicules ni le personnel\n- utilisable pour du mat\u00e9riel\n- utilisable pour des consommables (dans le cas de consommable, \u00e0 compl\u00e9ter avec le champ UM)"
                },
                "UM": {
                    "type": "string",
                    "title": "Unit\u00e9 de mesure pour la ressource",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/UM",
                    "description": "Dans le cadre d'un \u00e9change d'op\u00e9ration, optionnel. Unit\u00e9 de mesure pour des ressources consommables"
                },
                "STATUS": {
                    "type": "string",
                    "title": "Statut de la ressource",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/STATUS",
                    "description": "D\u00e9finit le statut de disponibilit\u00e9 d'une ressource.\n- AVAILB : Lorsqu'une mission est termin\u00e9e, une ressource redevient disponible\n- RESRVD : Lorsque la ressource est r\u00e9serv\u00e9e pour intervenir sur l'affaire mais pas encore engag\u00e9e dans l'op\u00e9ration. Par exemple : un SMUR termine un autre transfert patient/victime avant de rejoindre une autre intervention : il est alors RESRVD\n- IN_USE/MOBILE : \u00e0 utiliser pour les v\u00e9hicules et le personnel lorsqu'ils se d\u00e9places\n- IN_USE/ON_SCENE : \u00e0 utiliser pour les v\u00e9hicules et le personnel lorsqu'ils sont sur les lieux de l'affaire"
                },
                "NATIONALITY": {
                    "type": "string",
                    "title": "Nationalit\u00e9 de la ressource",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/NATIONALITY",
                    "description": "Nationalit\u00e9 d'une ressource, r\u00e9employer ISO 3166-1-alpha-2 code elements."
                },
                "CONTACTS": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/contact"
                    }
                }
            },
            "example": "example.json#/emsi/RESOURCE/0"
        },
        "rtype": {
            "type": "object",
            "title": "Type de la ressource",
            "x-display": "expansion-panels",
            "x-health-only": true,
            "required": [
                "RCLASS"
            ],
            "properties": {
                "RCLASS": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "title": "Classes de la ressource",
                        "x-cols": 6,
                        "example": "example.json#/emsi/RESOURCE/0/RTYPE/RCLASS/0",
                        "description": "Permet d'indiquer la classe de l'objet RESOURCE. Plusieurs niveau de d\u00e9tails sont fournis par la nomenclature associ\u00e9e.\nLe premier niveau permet notamment de d\u00e9crire la classe principale de ressource :\n- Un v\u00e9hicule,\n- Le personnel mobilis\u00e9,\n- Des consommables/ du mat\u00e9riel,\n- Un lieu ou une organisation (non utilis\u00e9 pour le moment)\nVoir nomenclature EMSI associ\u00e9e"
                    }
                },
                "CAPABILITY": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "title": "Capacit\u00e9s de la ressource",
                        "x-cols": 6,
                        "example": "example.json#/emsi/RESOURCE/0/RTYPE/CAPABILITY/0",
                        "description": "Permet d'indiquer les capacit\u00e9s de la ressource d'apr\u00e8s le standard EMSI"
                    }
                },
                "CHARACTERISTICS": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "title": "Caract\u00e9ristiques de la ressource",
                        "x-cols": 6,
                        "example": "example.json#/emsi/RESOURCE/0/RTYPE/CHARACTERISTICS/0",
                        "description": "Permet d'indiquer des caract\u00e9ristique physiques de la ressource (hauteur, largeur, longueur et poids).\nLe d\u00e9tail de fonctionnement de cette nomenclature est fournie en annexe."
                    }
                }
            },
            "example": "example.json#/emsi/RESOURCE/0/RTYPE"
        },
        "rgeo": {
            "type": "object",
            "title": "Localisation de la ressource",
            "x-display": "expansion-panels",
            "x-health-only": true,
            "required": [
                "TYPE"
            ],
            "properties": {
                "DATIME": {
                    "type": "string",
                    "title": "Horaire de la localisation",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/RGEO/0/DATIME",
                    "description": "Horaire associ\u00e9 \u00e0 l'arriv\u00e9e de la ressource sur la position. En fonction du TYPE de possition, peut indiquer un horaire de relev\u00e9 de position, un horaire cible d'arriv\u00e9e.",
                    "pattern": "\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}[\\-+]\\d{2}:\\d{2}",
                    "format": "date-time"
                },
                "TYPE": {
                    "type": "string",
                    "title": "Type de localisation",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/RGEO/0/TYPE",
                    "description": "Type de position indiqu\u00e9 pour la ressource :\n- ASP : assembly point. Point de rassemblement par d\u00e9faut des ressources li\u00e9es \u00e0 la mission. Peut ne pas \u00eatre utilis\u00e9\n- CUR : current. Position actualis\u00e9e de la ressource permettant le suivi g\u00e9olocalis\u00e9 des v\u00e9hicules notamment. Peut ne pas \u00eatre utilis\u00e9\n- INC : incident. Consigne relative au positionnement de la ressource sur le lieu d'intervention. Peut ne pas \u00eatre utilis\u00e9\n- STG : staging point. Consigne relative au stationnement des v\u00e9hicules ou au stockage du mat\u00e9riel par exemple. peut ne pas \u00eatre utilis\u00e9\n- TGT : targer location. Si renseign\u00e9, doit \u00eatre coh\u00e9rent avec la position renseign\u00e9e pour la mission.\nPlusieurs positions du m\u00eame type avec des horodatages diff\u00e9rents peuvent \u00eatre fournies. "
                },
                "FREETEXT": {
                    "type": "string",
                    "title": "Texte libre ",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/RGEO/0/FREETEXT",
                    "description": "Permet de rajouter des pr\u00e9cisions sur la localisation de la ressource transmise"
                },
                "ID": {
                    "type": "string",
                    "title": "ID localisation",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/RGEO/0/ID",
                    "description": "Identifiant unique de la position dans le syst\u00e8me du partenaire"
                },
                "POSITION": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/position"
                    }
                }
            },
            "example": "example.json#/emsi/RESOURCE/0/RGEO/0"
        },
        "contact": {
            "type": "object",
            "title": "Contacts",
            "x-display": "expansion-panels",
            "x-health-only": true,
            "required": [
                "TYPE",
                "DETAIL"
            ],
            "properties": {
                "TYPE": {
                    "type": "string",
                    "title": "Type de contact",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/CONTACTS/0/TYPE",
                    "description": "Type de contact, voir \u00e9num\u00e9ration associ\u00e9e\n\n1. PMRADD (si RFGI disponible)\n2. PHNADD pour t\u00e9l\u00e9phonie"
                },
                "DETAIL": {
                    "type": "string",
                    "title": "D\u00e9tails de contact",
                    "x-cols": 6,
                    "example": "example.json#/emsi/RESOURCE/0/CONTACTS/0/DETAIL",
                    "description": "1. RFGI du moyen NEXSIS (si RFGI disponible)\n2. Num\u00e9ro de t\u00e9l\u00e9phone"
                }
            },
            "example": "example.json#/emsi/RESOURCE/0/CONTACTS/0"
        },
        "position": {
            "type": "object",
            "title": "Position g\u00e9ographique",
            "x-display": "expansion-panels",
            "x-health-only": true,
            "required": [],
            "properties": {},
            "example": "example.json#/emsi/RESOURCE/0/RGEO/0/POSITION/0"
        }
    }
}